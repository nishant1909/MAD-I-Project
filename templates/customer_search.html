<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Customer Search</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
</head>

<body>
  <section class="fixed-top">
    <nav class="navbar navbar-expand-lg" style="
          background-color: #87ceeb;
          color: #003366;
          border-bottom: 2px solid #003366;
        ">
      <div class="container-fluid">
        <h3 class="m-3 ps-3">Welcome {{customer.name}}</h3>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup"
          aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-end" id="navbarNavAltMarkup">
          <div class="navbar-nav fs-5 nav-pills">
            <a class="nav-link pe-5 ps-5 fw-semibold" style="color: #003366"
              href="/customer/home/{{customer.email}}">Home</a>
            <a class="nav-link active pe-5 ps-5 text-white" aria-current="page"
              href="/customer/search/{{customer.email}}" style="background-color: #003366">Search</a>
            <button class="btn nav-link pe-5 ps-5 fw-semibold" style="color: #003366" data-bs-toggle="modal"
              data-bs-target="#profile">
              Profile
            </button>
            <a class="nav-link pe-5 ps-5 fw-semibold" style="color: #003366" href="/">Log out</a>
          </div>
        </div>
      </div>
    </nav>
  </section>

  <div class="modal fade" id="profile" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Profile</h5>
          <button type="button" class="btn-close" data-bs-toggle="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="ms-3">
            <p><span class="fw-semibold">Name:</span> {{customer.name}}</p>
            <p>
              <span class="fw-semibold">Email ID:</span> {{customer.email}}
            </p>
            <p>
              <span class="fw-semibold">Contact No.:</span>
              {{customer.contact}}
            </p>
            <p>
              <span class="fw-semibold">Address:</span> {{customer.address}}
            </p>
            <p>
              <span class="fw-semibold">Pincode:</span> {{customer.pincode}}
            </p>
          </div>
          <div class="mb-3 d-flex justify-content-center">
            <button class="btn nav-link pt-2 pb-2 pe-5 ps-5 fw-semibold" style="color: white; background-color: #003366"
              data-bs-toggle="modal" data-bs-target="#edit_profile">
              Edit
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="edit_profile" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Edit Your Profile</h5>
          <button type="button" class="btn-close" data-bs-toggle="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form action="/customer/edit_2/profile/{{customer.customer_id}}" method="POST">
            <div class="row mx-1">
              <div class="col">
                <div class="form-floating mb-3">
                  <input type="text" class="form-control" id="customername"
                    placeholder="Current Name: {{customer.name}}" name="customername" required />
                  <label for="customername">Current Name: {{customer.name}}</label>
                </div>
              </div>
            </div>

            <div class="row mx-1">
              <div class="col">
                <div class="form-floating mb-3">
                  <input type="email" class="form-control" id="customeremail"
                    placeholder="Currect Email Id: {{customer.email}}" name="customeremail" required />
                  <label for="customeremail">Current Email Id: {{customer.email}}</label>
                </div>
              </div>
            </div>

            <div class="row mx-1">
              <div class="col">
                <div class="form-floating mb-3">
                  <input type="number" class="form-control" id="customer_contact"
                    placeholder="Currect Email Id: {{customer.contact}}" name="customer_contact" required />
                  <label for="customer_contact">Current Contact No.: {{customer.contact}}</label>
                </div>
              </div>
            </div>

            <div class="row mx-1">
              <div class="col">
                <div class="form-floating mb-3">
                  <textarea class="form-control" placeholder="Current Address: {{customer.address}}"
                    id="customeraddress" name="customeraddress" required></textarea>
                  <label for="customeraddress">Current Address: {{customer.address}}</label>
                </div>
              </div>
            </div>

            <div class="row mx-1">
              <div class="col">
                <div class="form-floating mb-3">
                  <input type="number" class="form-control" pattern="\d{6}" maxlength="6" id="pincode"
                    placeholder="Current Pincode: {{customer.pincode}}" name="pincode" required />
                  <label for="pinocde">Current Pincode: {{customer.pincode}}</label>
                </div>
              </div>
            </div>

            <div class="text-center mb-2">
              <button type="submit" class="btn rounded-3 fw-semibold" style="
                    padding-left: 40px;
                    padding-right: 40px;
                    color: white;
                    background-color: #003366;
                  ">
                Submit
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  {% if customer.status=='Active' %}
  <br /><br />

  <div class="pt-3 pb-3 fixed-top bg-white" style="top: 83px">
    <div class="container">
      <div class="row">
        <div class="col-6 offset-3">
          <div class="text-center">
            <form action="/customer/search/{{customer.email}}" method="POST">
              <input type="hidden" value="{{type if type}}" name="type" />
              <div class="row">
                <div class="col-5">
                  <div class="dropdown">
                    <button class="btn dropdown-toggle ps-3 pe-3" type="button" data-bs-toggle="dropdown"
                      aria-expanded="false">
                      {{type if type else 'Select search type'}}
                    </button>
                    <ul class="dropdown-menu">
                      <li>
                        <a class="dropdown-item" href="/customer/search/service/name/{{customer.email}}">Service
                          Name</a>
                      </li>
                      <li>
                        <a class="dropdown-item"
                          href="/customer/search/service/professional/name/{{customer.email}}">Service Professional
                          Name</a>
                      </li>
                      <li>
                        <a class="dropdown-item" href="/customer/search/city/{{customer.email}}">City</a>
                      </li>
                      <li>
                        <a class="dropdown-item" href="/customer/search/pincode/{{customer.email}}">Pincode</a>
                      </li>
                    </ul>
                  </div>
                </div>
                <div class="col-5">
                  {% if type=='Pincode' %}
                  <input type="number" class="form-control" placeholder="Searching for" name="search" required />
                  {% else %}
                  <input type="text" class="form-control" placeholder="Searching for" name="search" required />
                  {% endif %}
                </div>
                <div class="col-2">
                  <button type="submit" class="btn rounded-3 fw-semibold" style="
                        padding-left: 40px;
                        padding-right: 40px;
                        color: white;
                        background-color: #003366;
                      ">
                    Submit
                  </button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

  {% if service_with_professional %}
  <div class="container" style="color: #003366">
    <br /><br /><br /><br /><br />
    <div class="row">
      <div class="col-10 offset-1">
        <h4>Search Results</h4>
        <div class="overflow-auto" style="height: 301px">
          <div class="container border">
            {% for item in service_with_professional %}
            <div class="row align-content-center border-bottom" style="height: 60px">
              <div class="col-6">
                <h5 class="align-content-center mt-1">
                  {{item.service.name}}
                </h5>
              </div>
              <div class="col-1">
                {% if item.service.status=='Active' %}
                <div class="mt-2">
                  <span class="rounded-pill ps-3 pe-3 text-white fw-semibold bg-success">
                    Active
                  </span>
                </div>
                {% else %}
                <div class="mt-2">
                  <span class="rounded-pill ps-2 pe-2 text-white fw-semibold bg-danger">
                    Inactive
                  </span>
                </div>
                {% endif %}
              </div>
              <div class="col-1">
                <div class="text-center align-content-center ms-3">
                  <button type="btn" class="btn fw-semibold" style="background-color: #003366; color: white"
                    data-bs-toggle="modal" data-bs-target="#service_{{item.service.service_id}}">
                    View
                  </button>
                </div>

                <div class="modal fade" id="service_{{item.service.service_id}}" data-bs-backdrop="static"
                  data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                  <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title">
                          About {{item.service.name}}
                        </h5>
                        <button type="button" class="btn-close" data-bs-toggle="modal" aria-label="Close"></button>
                      </div>
                      <div class="modal-body">
                        <div class="ms-3">
                          <p>
                            <span class="fw-semibold">Service Name:</span>
                            {{item.service.name}}
                          </p>
                          <p>
                            <span class="fw-semibold">Description:</span>
                            {{item.service.description}}
                          </p>
                          <p>
                            <span class="fw-semibold">Minimum Cost:</span>
                            {{item.service.min_price}}
                          </p>
                        </div>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn fw-semibold btn-warning" data-bs-toggle="modal"
                          data-bs-target="#service_{{item.service.service_id}}_professional">
                          View Service Professional
                        </button>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="modal fade" id="service_{{item.service.service_id}}_professional" data-bs-backdrop="static"
                  data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                  <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title">
                          All Service Professional providing
                          {{item.service.name}}
                        </h5>
                        <button type="button" class="btn-close" data-bs-toggle="modal" aria-label="Close"></button>
                      </div>
                      <div class="modal-body">
                        <div class="container overflow-auto border">
                          {% for professional in item.service_professional %}
                          <div class="row align-content-center border-bottom" style="height: 60px">
                            <div class="col-7">
                              <h5 class="mt-1">
                                {{professional.professional.name}}
                              </h5>
                            </div>
                            <div class="col-2">
                              <div class="text-center">
                                <button type="button" class="btn fw-semibold" style="
                                      background-color: #003366;
                                      color: white;
                                    " data-bs-toggle="modal"
                                  data-bs-target="#service_professional_{{professional.professional.professional_id}}">
                                  Details
                                </button>
                              </div>
                            </div>
                            <div class="col-3 text-center">
                              {% if item.service.status=='Active' %}
                              <button type="button" class="btn btn-success" data-bs-toggle="modal"
                                data-bs-target="#service_book_2_{{customer.customer_id}}_{{item.service.service_id}}_{{professional.professional.professional_id}}">
                                Book
                              </button>
                              {% else %}
                              <button type="button" class="btn btn-success" data-bs-toggle="modal"
                                data-bs-target="#service_book_2_{{customer.customer_id}}_{{item.service.service_id}}_{{professional.professional.professional_id}}"
                                disabled>
                                Book
                              </button>
                              {% endif %}
                            </div>
                          </div>
                          {% endfor %}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-4">
                <div class="text-center align-content-center">
                  <button type="btn" class="btn fw-semibold btn-warning" data-bs-toggle="modal"
                    data-bs-target="#service_{{item.service.service_id}}_professional">
                    View Service Professional
                  </button>
                </div>
              </div>
            </div>

            {% for professional in item.service_professional %}
            <div class="modal fade" id="service_professional_{{professional.professional.professional_id}}"
              data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel"
              aria-hidden="true">
              <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title">
                      About {{professional.professional.name}}
                    </h5>
                    <button type="button" class="btn-close" data-bs-toggle="modal"
                      data-bs-target="#service_{{item.service.service_id}}_professional"></button>
                  </div>
                  <div class="modal-body">
                    <div class="ms-3">
                      <p>
                        <span class="fw-semibold">Name:</span>
                        {{professional.professional.name}}
                      </p>
                      <p>
                        <span class="fw-semibold">Service Name:</span>
                        {{item.service.name}}
                      </p>
                      <p>
                        <span class="fw-semibold">Email ID:</span>
                        {{professional.professional.email}}
                      </p>
                      <p>
                        <span class="fw-semibold">Contact No.:</span>
                        {{professional.professional.contact}}
                      </p>
                      <p>
                        <span class="fw-semibold">City:</span>
                        {{professional.professional.city}}
                      </p>
                      <p>
                        <span class="fw-semibold">Pincode:</span>
                        {{professional.professional.pincode}}
                      </p>
                      <p>
                        <span class="fw-semibold">Description:</span>
                        {{professional.professional.description}}
                      </p>
                      <p>
                        <span class="fw-semibold">Experience:</span>
                        {{professional.professional.experience}} Years
                      </p>
                      <p>
                        <span class="fw-semibold">Average Rating:</span>
                        {{professional.avg_rating}}
                      </p>
                    </div>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-warning fw-semibold" data-bs-toggle="modal"
                      data-bs-target="#service_with_professional_review_{{professional.professional.professional_id}}">
                      Reviews
                    </button>
                    {% if item.service.status=='Active' %}
                    <button type="button" class="btn btn-success fw-semibold" data-bs-toggle="modal"
                      data-bs-target="#service_book_2_{{customer.customer_id}}_{{item.service.service_id}}_{{professional.professional.professional_id}}">
                      Book
                    </button>
                    {% else %}
                    <button type="button" class="btn btn-success fw-semibold" data-bs-toggle="modal"
                      data-bs-target="#service_book_2_{{customer.customer_id}}_{{item.service.service_id}}_{{professional.professional.professional_id}}"
                      disabled>
                      Book
                    </button>
                    {% endif %}
                  </div>
                </div>
              </div>
            </div>

            <div class="modal fade"
              id="service_book_2_{{customer.customer_id}}_{{item.service.service_id}}_{{professional.professional.professional_id}}"
              data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel"
              aria-hidden="true">
              <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title">
                      About {{professional.professional.name}}
                    </h5>
                    <button type="button" class="btn-close" data-bs-toggle="modal"
                      data-bs-target="#service_{{item.service.service_id}}"></button>
                  </div>
                  <div class="modal-body">
                    <div class="ms-3">
                      <p>
                        <span class="fw-semibold">Name:</span>
                        {{professional.professional.name}}
                      </p>
                      <p>
                        <span class="fw-semibold">Service Name:</span>
                        {{item.service.name}}
                      </p>
                      <p>
                        <span class="fw-semibold">Email ID:</span>
                        {{professional.professional.email}}
                      </p>
                      <p>
                        <span class="fw-semibold">Contact No.:</span>
                        {{professional.professional.contact}}
                      </p>
                      <p>
                        <span class="fw-semibold">City:</span>
                        {{professional.professional.city}}
                      </p>
                      <p>
                        <span class="fw-semibold">Pincode:</span>
                        {{professional.professional.pincode}}
                      </p>
                      <p>
                        <span class="fw-semibold">Description:</span>
                        {{professional.professional.description}}
                      </p>
                      <p>
                        <span class="fw-semibold">Experience:</span>
                        {{professional.professional.experience}} Years
                      </p>
                      <p>
                        <span class="fw-semibold">Average Rating:</span>
                        {{professional.avg_rating}}
                      </p>
                      <form
                        action="/service/book_2/{{customer.customer_id}}/{{item.service.service_id}}/{{professional.professional.professional_id}}"
                        method="POST">
                        <div class="me-2 mt-2 mb-2">
                          <label for="slot" class="form-label fw-semibold">Service Slot:</label>
                          &nbsp;&nbsp;
                          <input type="radio" id="slot1" name="slot" value="09:00 AM - 12:00 PM" required />
                          <label for="slot1">09:00 AM - 12:00 PM</label>
                          <div class="mb-2" style="margin-left: 105px">
                            <input type="radio" id="slot2" name="slot" value="12:00 PM - 03:00 PM" />
                            <label for="slot2">12:00 PM - 03:00 PM</label>
                            <br />
                          </div>
                          <div style="margin-left: 105px">
                            <input type="radio" id="slot3" name="slot" value="03:00 PM - 06:00 PM" />
                            <label for="slot3">03:00 PM - 06:00 PM</label>
                            <br />
                          </div>
                        </div>

                        <div class="me-2 mt-2 mb-2">
                          <div class="form-floating mb-3">
                            <input type="date" class="form-control" id="service_date" placeholder="Service Date"
                              name="service_date" required />
                            <label for="service_date">Service Date</label>
                          </div>
                        </div>

                        <div class="me-2 mt-2 mb-4">
                          <div class="form-floating mb-3">
                            <textarea class="form-control" placeholder="Remarks (if any)" id="remarks"
                              name="remarks"></textarea>
                            <label for="remarks">Remarks (if any)</label>
                          </div>
                        </div>
                        <div class="text-center mb-3">
                          <button type="submit" class="btn fw-semibold" style="background-color: #003366; color: white">
                            Submit
                          </button>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="modal fade" id="service_with_professional_review_{{professional.professional.professional_id}}"
              data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel"
              aria-hidden="true">
              <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title">
                      All reviews of {{professional.professional.name}}
                    </h5>
                    <button type="button" class="btn-close" data-bs-toggle="modal"
                      data-bs-target="#service_professional_{{professional.professional.professional_id}}"></button>
                  </div>
                  <div class="modal-body">
                    <div class="container overflow-auto border">
                      {% if professional.reviews %}
                      <div class="row align-content-center border-bottom mt-2">
                        <div class="col-5">
                          <h6>Comments</h6>
                        </div>
                        <div class="col-5">
                          <h6>Reviewed on</h6>
                        </div>
                        <div class="col-2">
                          <div class="text-center">
                            <h6>Ratings</h6>
                          </div>
                        </div>
                      </div>
                      {% for review in professional.reviews %}
                      <div class="row align-content-center border-bottom mt-2">
                        <div class="col-5">
                          {% if review.comment %}
                          <p>{{review.comment}}</p>
                          {% else%}
                          <p>No comment</p>
                          {% endif %}
                        </div>
                        <div class="col-5">
                          <p>{{review.posted_datetime.strftime('%d/%m/%Y %H:%M:%S')}}</p>
                        </div>
                        <div class="col-2">
                          <div class="text-center">
                            <p>{{review.rating}}</p>
                          </div>
                        </div>
                      </div>
                      {% endfor %} {% else %}
                      <div class="text-center mt-3">
                        <p>No reviews</p>
                      </div>
                      {% endif %}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            {% endfor %} {% endfor %}
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row fixed-bottom" style="background-color: #fcfcfc; height: 60px">
    <p class="text-center mt-3">&copy; 2024 Nishant Kumar</p>
  </div>

  {% elif service_professional_output %}
  <div class="container" style="color: #003366">
    <br /><br /><br /><br /><br />
    <div class="row">
      <div class="col-10 offset-1">
        <h4>Search Results of Service Professional</h4>
        <div class="overflow-auto" style="height: 301px">
          <div class="container border">
            {% for item in service_professional_output %}
            <div class="row align-content-center border-bottom" style="height: 60px">
              <div class="col-5">
                <h5 class="align-content-center mt-1">
                  {{item.professional.name}}
                </h5>
              </div>
              <div class="col-2">
                {% if item.service.status=='Active' %}
                <div class="mt-2">
                  <span class="rounded-pill ps-3 pe-3 text-white fw-semibold bg-success">
                    Service Active
                  </span>
                </div>
                {% else %}
                <div class="mt-2">
                  <span class="rounded-pill ps-2 pe-2 text-white fw-semibold bg-danger">
                    Service Inactive
                  </span>
                </div>
                {% endif %}
              </div>
              <div class="col-1">
                <button type="btn" class="btn fw-semibold" style="background-color: #003366; color: white"
                  data-bs-toggle="modal" data-bs-target="#professional_view_{{item.professional.professional_id}}">
                  View
                </button>

                <div class="modal fade" id="professional_view_{{item.professional.professional_id}}"
                  data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel"
                  aria-hidden="true">
                  <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title">
                          About {{item.professional.name}}
                        </h5>
                        <button type="button" class="btn-close" data-bs-toggle="modal" aria-label="Close"></button>
                      </div>
                      <div class="modal-body">
                        <div class="ms-3">
                          <p>
                            <span class="fw-semibold">Name:</span>
                            {{item.professional.name}}
                          </p>
                          <p>
                            <span class="fw-semibold">Service Name:</span>
                            {{item.service.name}}
                          </p>
                          <p>
                            <span class="fw-semibold">Email ID:</span>
                            {{item.professional.email}}
                          </p>
                          <p>
                            <span class="fw-semibold">Contact No.:</span>
                            {{item.professional.contact}}
                          </p>
                          <p>
                            <span class="fw-semibold">City:</span>
                            {{item.professional.city}}
                          </p>
                          <p>
                            <span class="fw-semibold">Pincode:</span>
                            {{item.professional.pincode}}
                          </p>
                          <p>
                            <span class="fw-semibold">Description:</span>
                            {{item.professional.description}}
                          </p>
                          <p>
                            <span class="fw-semibold">Experience:</span>
                            {{item.professional.experience}} Years
                          </p>
                          <p>
                            <span class="fw-semibold">Average Rating:</span>
                            {{item.avg_rating}}
                          </p>
                        </div>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn fw-semibold btn-warning" data-bs-toggle="modal"
                          data-bs-target="#professional_review_{{item.professional.professional_id}}_professional">
                          Reviews
                        </button>
                        {% if item.service.status=='Active' %}
                        <button type="button" class="btn btn-success" data-bs-toggle="modal"
                          data-bs-target="#service_book_2_{{customer.customer_id}}_{{item.service.service_id}}_{{item.professional.professional_id}}">
                          Book
                        </button>
                        {% else %}
                        <button type="button" class="btn btn-success" data-bs-toggle="modal"
                          data-bs-target="#service_book_2_{{customer.customer_id}}_{{item.service.service_id}}_{{item.professional.professional_id}}"
                          disabled>
                          Book
                        </button>
                        {% endif %}
                      </div>
                    </div>
                  </div>
                </div>

                <div class="modal fade" id="professional_review_{{item.professional.professional_id}}_professional"
                  data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel"
                  aria-hidden="true">
                  <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title">
                          All reviews of {{item.professional.name}}
                        </h5>
                        <button type="button" class="btn-close" data-bs-toggle="modal" aria-label="Close"></button>
                      </div>
                      <div class="modal-body">
                        <div class="container overflow-auto border">
                          {% if item.reviews %}
                          <div class="row align-content-center border-bottom mt-2">
                            <div class="col-5">
                              <h6>Comments</h6>
                            </div>
                            <div class="col-5">
                              <h6>Reviewed on</h6>
                            </div>
                            <div class="col-2">
                              <div class="text-center">
                                <h6>Ratings</h6>
                              </div>
                            </div>
                          </div>
                          {% for review in item.reviews %}
                          <div class="row align-content-center border-bottom mt-2">
                            <div class="col-5">
                              {% if review.comment %}
                              <p>{{review.comment}}</p>
                              {% else%}
                              <p>No comment</p>
                              {% endif %}
                            </div>
                            <div class="col-5">
                              <p>{{review.posted_datetime.strftime('%d/%m/%Y %H:%M:%S')}}</p>
                            </div>
                            <div class="col-2">
                              <div class="text-center">
                                <p>{{review.rating}}</p>
                              </div>
                            </div>
                          </div>
                          {% endfor %} {% else %}
                          <div class="text-center mt-3">
                            <p>No reviews</p>
                          </div>
                          {% endif %}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="modal fade"
                  id="service_book_2_{{customer.customer_id}}_{{item.service.service_id}}_{{item.professional.professional_id}}"
                  data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel"
                  aria-hidden="true">
                  <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title">
                          About {{item.professional.name}}
                        </h5>
                        <button type="button" class="btn-close" data-bs-toggle="modal"
                          data-bs-target="#service_{{item.service.service_id}}"></button>
                      </div>
                      <div class="modal-body">
                        <div class="ms-3">
                          <p>
                            <span class="fw-semibold">Name:</span>
                            {{item.professional.name}}
                          </p>
                          <p>
                            <span class="fw-semibold">Service Name:</span>
                            {{item.service.name}}
                          </p>
                          <p>
                            <span class="fw-semibold">Email ID:</span>
                            {{item.professional.email}}
                          </p>
                          <p>
                            <span class="fw-semibold">Contact No.:</span>
                            {{item.professional.contact}}
                          </p>
                          <p>
                            <span class="fw-semibold">City:</span>
                            {{item.professional.city}}
                          </p>
                          <p>
                            <span class="fw-semibold">Pincode:</span>
                            {{item.professional.pincode}}
                          </p>
                          <p>
                            <span class="fw-semibold">Description:</span>
                            {{item.professional.description}}
                          </p>
                          <p>
                            <span class="fw-semibold">Experience:</span>
                            {{item.professional.experience}} Years
                          </p>
                          <form
                            action="/service/book_2/{{customer.customer_id}}/{{item.service.service_id}}/{{item.professional.professional_id}}"
                            method="POST">
                            <div class="me-2 mt-2 mb-2">
                              <label for="slot" class="form-label fw-semibold">Service Slot:</label>
                              &nbsp;&nbsp;
                              <input type="radio" id="slot1" name="slot" value="09:00 AM - 12:00 PM" required />
                              <label for="slot1">09:00 AM - 12:00 PM</label>
                              <div class="mb-2" style="margin-left: 105px">
                                <input type="radio" id="slot2" name="slot" value="12:00 PM - 03:00 PM" />
                                <label for="slot2">12:00 PM - 03:00 PM</label>
                                <br />
                              </div>
                              <div style="margin-left: 105px">
                                <input type="radio" id="slot3" name="slot" value="03:00 PM - 06:00 PM" />
                                <label for="slot3">03:00 PM - 06:00 PM</label>
                                <br />
                              </div>
                            </div>

                            <div class="me-2 mt-2 mb-2">
                              <div class="form-floating mb-3">
                                <input type="date" class="form-control" id="service_date" placeholder="Service Date"
                                  name="service_date" required />
                                <label for="service_date">Service Date</label>
                              </div>
                            </div>

                            <div class="me-2 mt-2 mb-4">
                              <div class="form-floating mb-3">
                                <textarea class="form-control" placeholder="Remarks (if any)" id="remarks"
                                  name="remarks"></textarea>
                                <label for="remarks">Remarks (if any)</label>
                              </div>
                            </div>
                            <div class="text-center mb-3">
                              <button type="submit" class="btn fw-semibold" style="
                                    background-color: #003366;
                                    color: white;
                                  ">
                                Submit
                              </button>
                            </div>
                          </form>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-1">
                <button type="button" class="btn fw-semibold btn-warning" data-bs-toggle="modal"
                  data-bs-target="#professional_review_{{item.professional.professional_id}}_professional">
                  Reviews
                </button>
              </div>

              <div class="col-1">
                <div class="ms-2">
                  {% if item.service.status=='Active' %}
                  <button type="button" class="btn btn-success fw-semibold" data-bs-toggle="modal"
                    data-bs-target="#service_book_2_{{customer.customer_id}}_{{item.service.service_id}}_{{item.professional.professional_id}}">
                    Book
                  </button>
                  {% else %}
                  <button type="button" class="btn btn-success fw-semibold" data-bs-toggle="modal"
                    data-bs-target="#service_book_2_{{customer.customer_id}}_{{item.service.service_id}}_{{item.professional.professional_id}}"
                    disabled>
                    Book
                  </button>
                  {% endif %}
                </div>
              </div>

              <div class="col-2">
                <h6 class="mt-2 ms-2">
                  Avg. Rating <span class="fw-bold">{{item.avg_rating}}</span>
                </h6>
              </div>
            </div>
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row fixed-bottom" style="background-color: #fcfcfc; height: 60px">
    <p class="text-center mt-3">&copy; 2024 Nishant Kumar</p>
  </div>
  {% else %}
  <div class="text-center">
    <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
    <p>No Results Found</p>
    <div class="row fixed-bottom" style="background-color: #fcfcfc; height: 60px">
      <p class="text-center mt-3">&copy; 2024 Nishant Kumar</p>
    </div>
  </div>
  {% endif %} {% elif customer.status=='Blocked' %}
  <div class="container">
    <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
    <div class="row">
      <h3 class="text-center text-danger">
        Your Account is Blocked by Admin.
      </h3>
    </div>
    <div class="row fixed-bottom" style="background-color: #fcfcfc; height: 60px">
      <p class="text-center mt-3">&copy; 2024 Nishant Kumar</p>
    </div>
  </div>

  {% endif %}

  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
    integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
    integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
    crossorigin="anonymous"></script>
</body>

</html>